<metadata>
  <connectionInfo>
    <hostname>localhost</hostname>
    <port>15672</port>
    <username>guest</username>
    <password>guest</password>
    <useSsl>false</useSsl>
  </connectionInfo>
  <vhosts class="list"/>
  <exchanges class="list">
    <exchange>
      <name>entry</name>
      <vhost>/</vhost>
      <type>fanout</type>
      <durable>false</durable>
      <auto__delete>false</auto__delete>
      <internal>false</internal>
    </exchange>
    <exchange>
      <name>apps</name>
      <vhost>/</vhost>
      <type>topic</type>
      <durable>false</durable>
      <auto__delete>false</auto__delete>
      <internal>false</internal>
    </exchange>
    <exchange>
      <name>users</name>
      <vhost>/</vhost>
      <type>headers</type>
      <durable>false</durable>
      <auto__delete>false</auto__delete>
      <internal>false</internal>
    </exchange>
  </exchanges>
  <queues class="list">
    <queue>
      <name>app1</name>
      <vhost>/</vhost>
      <durable>false</durable>
      <auto__delete>false</auto__delete>
      <arguments/>
    </queue>
    <queue>
      <name>app2</name>
      <vhost>/</vhost>
      <durable>false</durable>
      <auto__delete>false</auto__delete>
      <arguments/>
    </queue>
    <queue>
      <name>johndoe</name>
      <vhost>/</vhost>
      <durable>false</durable>
      <auto__delete>false</auto__delete>
      <arguments/>
    </queue>
    <queue>
      <name>janedoe</name>
      <vhost>/</vhost>
      <durable>false</durable>
      <auto__delete>false</auto__delete>
      <arguments/>
    </queue>
  </queues>
  <users class="list">
    <user>
      <name>admin</name>
      <tags>administrator</tags>
      <password>password</password>
    </user>
    <user>
      <name>app1</name>
      <tags>service</tags>
      <password>password</password>
    </user>
    <user>
      <name>app2</name>
      <tags>service</tags>
      <password>password</password>
    </user>
    <user>
      <name>johndoe</name>
      <tags>user</tags>
      <password>password</password>
    </user>
    <user>
      <name>janedoe</name>
      <tags>user</tags>
      <password>password</password>
    </user>
  </users>
  <permissions class="list">
    <permission>
      <vhost>/</vhost>
      <user>app1</user>
      <configure>^$</configure>
      <write>entry</write>
      <read>app1</read>
    </permission>
    <permission>
      <vhost>/</vhost>
      <user>app2</user>
      <configure>^$</configure>
      <write>entry</write>
      <read>app2</read>
    </permission>
    <permission>
      <vhost>/</vhost>
      <user>johndoe</user>
      <configure>^$</configure>
      <write>entry</write>
      <read>johndoe</read>
    </permission>
    <permission>
      <vhost>/</vhost>
      <user>janedoe</user>
      <configure>^$</configure>
      <write>entry</write>
      <read>janedoe</read>
    </permission>
  </permissions>
  <bindings class="list">
    <binding>
      <source>entry</source>
      <vhost>/</vhost>
      <destination>apps</destination>
      <destination__type>e</destination__type>
      <arguments/>
    </binding>
    <binding>
      <source>entry</source>
      <vhost>/</vhost>
      <destination>users</destination>
      <destination__type>e</destination__type>
      <arguments/>
    </binding>
    <binding>
      <source>apps</source>
      <vhost>/</vhost>
      <destination>app1</destination>
      <destination__type>q</destination__type>
      <routing__key>security.events.#</routing__key>
      <arguments/>
    </binding>
    <binding>
      <source>apps</source>
      <vhost>/</vhost>
      <destination>app1</destination>
      <destination__type>q</destination__type>
      <routing__key>search.events.#</routing__key>
      <arguments/>
    </binding>
    <binding>
      <source>apps</source>
      <vhost>/</vhost>
      <destination>app2</destination>
      <destination__type>q</destination__type>
      <routing__key>db.events.#</routing__key>
      <arguments/>
    </binding>
    <binding>
      <source>apps</source>
      <vhost>/</vhost>
      <destination>app2</destination>
      <destination__type>q</destination__type>
      <routing__key>mgmt.events.#</routing__key>
      <arguments/>
    </binding>
    <binding>
      <source>users</source>
      <vhost>/</vhost>
      <destination>johndoe</destination>
      <destination__type>q</destination__type>
      <arguments>
        <entry>
          <string>TO</string>
          <string>johndoe</string>
        </entry>
        <entry>
          <string>x-match</string>
          <string>all</string>
        </entry>
      </arguments>
    </binding>
    <binding>
      <source>users</source>
      <vhost>/</vhost>
      <destination>janedoe</destination>
      <destination__type>q</destination__type>
      <arguments>
        <entry>
          <string>TO</string>
          <string>janedoe</string>
        </entry>
        <entry>
          <string>x-match</string>
          <string>all</string>
        </entry>
      </arguments>
    </binding>
  </bindings>
</metadata>